<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cashew Budgeting App</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.plaid.com/link/v2/stable/link-initialize.js"></script>
    <style>
        body {
            font-family: 'Arial, sans-serif';
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background: #f9f9f9;
            color: #333;
        }
        header {
            background: #4CAF50;
            color: #fff;
            padding: 20px 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: auto;
            padding: 0 20px;
        }
        header nav ul {
            list-style: none;
            padding: 0;
            display: flex;
            gap: 15px;
        }
        header nav ul li a {
            color: #fff;
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s;
        }
        header nav ul li a:hover {
            color: #ffeb3b;
        }
        .hero {
            background: url('https://source.unsplash.com/1600x900/?finance,budget') no-repeat center center/cover;
            color: #fff;
            padding: 100px 0;
            text-align: center;
        }
        .hero .container {
            max-width: 800px;
            margin: auto;
        }
        .hero h2 {
            font-size: 3rem;
            margin-bottom: 20px;
        }
        .hero p {
            font-size: 1.2rem;
            margin-bottom: 30px;
        }
        .hero button {
            background: #ffeb3b;
            color: #333;
            border: none;
            padding: 15px 30px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s;
        }
        .hero button:hover {
            background: #ffc107;
        }
        .features {
            background: #fff;
            padding: 50px 20px;
        }
        .features .container {
            max-width: 1200px;
            margin: auto;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .feature {
            background: #f1f1f1;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            flex: 1;
            min-width: 280px;
            text-align: center;
        }
        .feature h3 {
            margin-bottom: 10px;
        }
        .feature p {
            font-size: 1rem;
        }
        footer {
            background: #333;
            color: #fff;
            text-align: center;
            padding: 20px 0;
            margin-top: 50px;
        }
        .transactions {
            max-width: 800px;
            margin: 30px auto;
            padding: 20px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .transaction {
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }
        .transaction:last-child {
            border-bottom: none;
        }
        .budget-setup {
            background: #f9f9f9;
            padding: 50px 20px;
        }
        .budget-setup .container {
            max-width: 1200px;
            margin: auto;
            display: flex;
            flex-wrap: nowrap;
            overflow-x: auto;
            gap: 20px;
        }
        .budget-card {
            flex: 0 0 auto;
            width: 300px;
            height: 200px;
            border-radius: 15px;
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.3s;
        }
        .budget-card:hover {
            transform: scale(1.1);
        }
        .budget-card.selected {
            transform: scale(1.2);
        }
        .budget-card.red {
            background: #e74c3c;
        }
        .budget-card.blue {
            background: #3498db;
        }
        .budget-card.green {
            background: #2ecc71;
        }
        .budget-card.yellow {
            background: #f1c40f;
        }
        .budget-card.purple {
            background: #9b59b6;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1><i class="fas fa-wallet"></i> Cashew Budgeting App</h1>
            <nav>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Features</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <main>
        <section class="hero">
            <div class="container">
                <h2>Track your spending effortlessly</h2>
                <p>Connect your cards and manage your budgets in real-time. Receive notifications to keep your expenses under control.</p>
                <button id="connectBankButton">Connect Your Discover Card</button>
            </div>
        </section>
        
        <section class="features">
            <div class="container">
                <h2>Features</h2>
                <div class="feature">
                    <h3><i class="fas fa-chart-line"></i> Real-time Tracking</h3>
                    <p>Keep track of your transactions instantly as they happen.</p>
                </div>
                <div class="feature">
                    <h3><i class="fas fa-list-alt"></i> Custom Budget Categories</h3>
                    <p>Create your own categories for different budgets and track your expenses accordingly.</p>
                </div>
                <div class="feature">
                    <h3><i class="fas fa-bell"></i> Notifications</h3>
                    <p>Receive notifications to alert you when you're nearing your category spending limit.</p>
                </div>
            </div>
        </section>

        <section class="budget-setup">
            <div class="container">
                <h2>Set Up Your Budget Categories</h2>
                <div class="budget-card red" onclick="selectBudgetCard(this)">Groceries</div>
                <div class="budget-card blue" onclick="selectBudgetCard(this)">Rent</div>
                <div class="budget-card green" onclick="selectBudgetCard(this)">Entertainment</div>
                <div class="budget-card yellow" onclick="selectBudgetCard(this)">Transportation</div>
                <div class="budget-card purple" onclick="selectBudgetCard(this)">Savings</div>
            </div>
        </section>
    </main>
    
    <footer>
        <div class="container">
            <p>&copy; 2024 Cashew Budgeting App. All rights reserved.</p>
        </div>
    </footer>
    
    <script>
        var plaidLinkHandler = Plaid.create({
            clientName: 'Cashew Budgeting App',
            key: 'your-plaid-public-key',
            product: ['transactions'],
            env: 'sandbox', // Can be 'sandbox', 'development', or 'production'
            onSuccess: function(public_token, metadata) {
                // Send public_token to your server to exchange it for an access_token
                fetch('/get_access_token', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        public_token: public_token,
                    }),
                }).then(response => response.json())
                  .then(data => {
                      console.log('Access Token:', data.access_token);
                      // Fetch and display transactions after obtaining the access token
                      fetch('/get_transactions', {
                          method: 'POST',
                          headers: {
                              'Content-Type': 'application/json',
                          },
                          body: JSON.stringify({
                              access_token: data.access_token,
                          }),
                      }).then(response => response.json())
                        .then(transactionsData => {
                            console.log('Transactions:', transactionsData.transactions);
                            // Display transactions on the webpage
                            const transactionsContainer = document.createElement('div');
                            transactionsContainer.className = 'transactions';
                            transactionsData.transactions.forEach(transaction => {
                                const transactionElement = document.createElement('div');
                                transactionElement.className = 'transaction';
                                transactionElement.innerHTML = `<p>${transaction.name}: $${transaction.amount}</p>`;
                                transactionsContainer.appendChild(transactionElement);
                            });
                            document.body.appendChild(transactionsContainer);
                        });
                  });
            },
            onExit: function(err, metadata) {
                // Handle when a user exits Link
                if (err != null) {
                    console.error(err);
                }
            },
        });

        document.getElementById('connectBankButton').onclick = function() {
            plaidLinkHandler.open();
        };

        function selectBudgetCard(card) {
            document.querySelectorAll('.budget-card').forEach(c => c.classList.remove('selected'));
            card.classList.add('selected');
        }
    </script>
    <script src="app.js"></script>
</body>
</html>
